
# 2.8s user time, 40ms system time, 34.58M rss, 389.99G vsz
# Current date: Fri Nov 10 01:52:58 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 69.98k total, 12 unique, 1.04k QPS, 2.33x concurrency _________
# Time range: 2023-11-09T16:50:46 to 2023-11-09T16:51:53
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           156s     1us      3s     2ms     5ms    27ms   119us
# Lock time          121ms       0     3ms     1us     1us    20us     1us
# Rows sent          1.62M       0   4.83k   24.31   92.72  232.94    0.99
# Rows examine      27.99M       0   3.08M  419.43   1.46k  12.27k    0.99
# Query size         5.01M      27     166   75.10  143.84   43.43   51.63

# Profile
# Rank Query ID                            Response time  Calls R/Call V/M
# ==== =================================== ============== ===== ====== ===
#    1 0x676347F321DB8BC7FCB05D4948FC2248  141.1623 90.3% 10821 0.0130  0.32 SELECT visit_history
#    2 0x57AC6CF9E75AF6673635BEFFE5F2117E    6.2102  4.0% 34655 0.0002  0.00 SELECT tenant
#    3 0x2E69352DE16B15042A1217500A0400FE    4.9557  3.2% 10118 0.0005  0.00 INSERT visit_history
# MISC 0xMISC                                4.0042  2.6% 14387 0.0003   0.0 <9 ITEMS>

# Query 1: 169.08 QPS, 2.21x concurrency, ID 0x676347F321DB8BC7FCB05D4948FC2248 at byte 549868
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.32
# Time range: 2023-11-09T16:50:49 to 2023-11-09T16:51:53
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         15   10821
# Exec time     90    141s   141us      1s    13ms    23ms    64ms     2ms
# Lock time     21    26ms       0     3ms     2us     1us    37us     1us
# Rows sent     96   1.57M       0   4.83k  152.25  166.51  576.55   56.92
# Rows examine  88  24.86M       0  77.75k   2.35k   2.62k   9.05k  874.75
# Query size    29   1.47M     137     144  142.30  136.99    0.56  136.99
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################
#   1ms  ################################################################
#  10ms  ##################
# 100ms  ##
#    1s  #
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'visit_history'\G
#    SHOW CREATE TABLE `isuports`.`visit_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT player_id, MIN(created_at) AS min_created_at FROM visit_history WHERE tenant_id = 1 AND competition_id = '5d5e808a3' GROUP BY player_id\G

# Query 2: 541.48 QPS, 0.10x concurrency, ID 0x57AC6CF9E75AF6673635BEFFE5F2117E at byte 1647597
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-09T16:50:49 to 2023-11-09T16:51:53
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         49   34655
# Exec time      3      6s    55us    25ms   179us   366us   440us   108us
# Lock time     50    61ms       0     2ms     1us     1us    16us     1us
# Rows sent      2  33.84k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  33.84k       0       1    1.00    0.99    0.01    0.99
# Query size    33   1.69M      42      57   51.25   54.21    3.62   51.63
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################
# 100us  ################################################################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'tenant'\G
#    SHOW CREATE TABLE `isuports`.`tenant`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM tenant WHERE name = 'uhu-t-48'\G

# Query 3: 160.60 QPS, 0.08x concurrency, ID 0x2E69352DE16B15042A1217500A0400FE at byte 16154808
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-09T16:50:50 to 2023-11-09T16:51:53
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         14   10118
# Exec time      3      5s    89us    40ms   489us     2ms     1ms   167us
# Lock time     14    17ms       0     2ms     1us     1us    21us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    27   1.38M     138     150  143.20  143.84    3.39  136.99
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'visit_history'\G
#    SHOW CREATE TABLE `isuports`.`visit_history`\G
INSERT INTO visit_history (player_id, tenant_id, competition_id, created_at, updated_at) VALUES ('8011', 1176, '20814', 1699548705, 1699548705)\G
