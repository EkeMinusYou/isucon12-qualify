
# 2.9s user time, 30ms system time, 35.28M rss, 390.15G vsz
# Current date: Fri Nov 10 03:03:51 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 73.58k total, 12 unique, 1.05k QPS, 2.17x concurrency _________
# Time range: 2023-11-09T18:02:25 to 2023-11-09T18:03:35
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           152s     1us      3s     2ms     4ms    25ms   113us
# Lock time          131ms       0     8ms     1us     1us    35us     1us
# Rows sent          1.65M       0   4.83k   23.52   92.72  227.26    0.99
# Rows examine      28.42M       0   3.09M  405.08   1.39k  11.97k    0.99
# Query size         5.30M      27     172   75.54  143.84   43.09   54.21

# Profile
# Rank Query ID                            Response time  Calls R/Call V/M
# ==== =================================== ============== ===== ====== ===
#    1 0x676347F321DB8BC7FCB05D4948FC2248  135.9687 89.6% 11348 0.0120  0.29 SELECT visit_history
#    2 0x57AC6CF9E75AF6673635BEFFE5F2117E    6.3627  4.2% 36519 0.0002  0.00 SELECT tenant
#    3 0x2E69352DE16B15042A1217500A0400FE    5.2347  3.5% 10525 0.0005  0.00 INSERT visit_history
# MISC 0xMISC                                4.1594  2.7% 15187 0.0003   0.0 <9 ITEMS>

# Query 1: 180.13 QPS, 2.16x concurrency, ID 0x676347F321DB8BC7FCB05D4948FC2248 at byte 2651144
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.29
# Time range: 2023-11-09T18:02:32 to 2023-11-09T18:03:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         15   11348
# Exec time     89    136s   128us   839ms    12ms    20ms    59ms     2ms
# Lock time     17    23ms       0     3ms     2us     1us    31us     1us
# Rows sent     96   1.60M       0   4.83k  147.56  166.51  563.48   56.92
# Rows examine  88  25.29M       0  77.75k   2.28k   2.62k   8.85k  874.75
# Query size    29   1.54M     137     144  142.30  136.99    0.54  136.99
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################
#   1ms  ################################################################
#  10ms  #################
# 100ms  ##
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'visit_history'\G
#    SHOW CREATE TABLE `isuports`.`visit_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT player_id, MIN(created_at) AS min_created_at FROM visit_history WHERE tenant_id = 1 AND competition_id = '5d5e808a3' GROUP BY player_id\G

# Query 2: 579.67 QPS, 0.10x concurrency, ID 0x57AC6CF9E75AF6673635BEFFE5F2117E at byte 122488
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-09T18:02:32 to 2023-11-09T18:03:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         49   36519
# Exec time      4      6s    48us    23ms   174us   348us   425us   108us
# Lock time     55    73ms       0     8ms     2us     1us    45us     1us
# Rows sent      2  35.66k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  35.66k       0       1    1.00    0.99    0.01    0.99
# Query size    34   1.83M      42      58   52.54   56.92    5.01   51.63
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################
# 100us  ################################################################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'tenant'\G
#    SHOW CREATE TABLE `isuports`.`tenant`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM tenant WHERE name = 'v-ksxzfs-1699552955'\G

# Query 3: 167.06 QPS, 0.08x concurrency, ID 0x2E69352DE16B15042A1217500A0400FE at byte 5495702
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-09T18:02:32 to 2023-11-09T18:03:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         14   10525
# Exec time      3      5s    83us    22ms   497us     2ms     1ms   167us
# Lock time     13    17ms       0     2ms     1us     1us    17us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    27   1.44M     138     150  143.26  143.84    3.42  136.99
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'visit_history'\G
#    SHOW CREATE TABLE `isuports`.`visit_history`\G
INSERT INTO visit_history (player_id, tenant_id, competition_id, created_at, updated_at) VALUES ('17310', 1336, '35928', 1699552977, 1699552977)\G
