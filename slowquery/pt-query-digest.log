
# 3.2s user time, 40ms system time, 34.56M rss, 389.99G vsz
# Current date: Sat Nov 11 22:15:15 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 82.58k total, 12 unique, 1.20k QPS, 2.83x concurrency _________
# Time range: 2023-11-11T13:13:48 to 2023-11-11T13:14:57
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           195s     1us      3s     2ms     5ms    33ms   103us
# Lock time          201ms       0    29ms     2us     1us   119us     1us
# Rows sent          1.56M       0   4.83k   19.85   76.28  209.50    0.99
# Rows examine      27.03M       0   3.09M  343.22   1.20k  11.28k    0.99
# Query size         5.46M      27     161   69.28  143.84   42.92   54.21

# Profile
# Rank Query ID                            Response time  Calls R/Call V/M
# ==== =================================== ============== ===== ====== ===
#    1 0x676347F321DB8BC7FCB05D4948FC2248  174.9378 89.6% 10775 0.0162  0.46 SELECT visit_history
#    2 0x2E69352DE16B15042A1217500A0400FE    9.0427  4.6% 10432 0.0009  0.00 INSERT visit_history
#    3 0x57AC6CF9E75AF6673635BEFFE5F2117E    7.0541  3.6% 35898 0.0002  0.00 SELECT tenant
# MISC 0xMISC                                4.2195  2.2% 25471 0.0002   0.0 <9 ITEMS>

# Query 1: 171.03 QPS, 2.78x concurrency, ID 0x676347F321DB8BC7FCB05D4948FC2248 at byte 7132526
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.46
# Time range: 2023-11-11T13:13:54 to 2023-11-11T13:14:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         13   10775
# Exec time     89    175s   135us      1s    16ms    30ms    87ms     2ms
# Lock time     29    60ms       0    11ms     5us     1us   161us     1us
# Rows sent     96   1.51M       0   4.83k  147.06  166.51  564.43   54.21
# Rows examine  88  23.89M       0  77.75k   2.27k   2.62k   8.86k  874.75
# Query size    26   1.46M     136     144  142.22  136.99    0.64  136.99
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###############################################
#   1ms  ################################################################
#  10ms  #############################
# 100ms  ##
#    1s  #
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'visit_history'\G
#    SHOW CREATE TABLE `isuports`.`visit_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT player_id, MIN(created_at) AS min_created_at FROM visit_history WHERE tenant_id = 1 AND competition_id = '5d5e808a3' GROUP BY player_id\G

# Query 2: 165.59 QPS, 0.14x concurrency, ID 0x2E69352DE16B15042A1217500A0400FE at byte 6643513
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-11T13:13:54 to 2023-11-11T13:14:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         12   10432
# Exec time      4      9s    84us    51ms   866us     4ms     2ms   204us
# Lock time      9    18ms       0     1ms     1us     1us    17us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    26   1.42M     138     150  143.04  143.84    3.36  136.99
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'visit_history'\G
#    SHOW CREATE TABLE `isuports`.`visit_history`\G
INSERT INTO visit_history (player_id, tenant_id, competition_id, created_at, updated_at) VALUES ('22c61c6f1', 65, '38931', 1699708461, 1699708461)\G

# Query 3: 569.81 QPS, 0.11x concurrency, ID 0x57AC6CF9E75AF6673635BEFFE5F2117E at byte 23315
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-11T13:13:54 to 2023-11-11T13:14:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         43   35898
# Exec time      3      7s    51us    75ms   196us   332us   959us   103us
# Lock time     52   106ms       0    29ms     2us     1us   158us     1us
# Rows sent      2  35.06k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  35.06k       0       1    1.00    0.99    0.01    0.99
# Query size    33   1.82M      42      58   53.06   56.92    4.56   54.21
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###########################
# 100us  ################################################################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'tenant'\G
#    SHOW CREATE TABLE `isuports`.`tenant`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM tenant WHERE name = 'kvrzz-kw-1699708432'\G
