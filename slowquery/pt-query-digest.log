
# 3s user time, 50ms system time, 35.03M rss, 390.00G vsz
# Current date: Fri Nov 10 02:15:28 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 72.49k total, 12 unique, 1.07k QPS, 2.27x concurrency _________
# Time range: 2023-11-09T17:13:36 to 2023-11-09T17:14:44
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           154s     1us      3s     2ms     4ms    25ms   119us
# Lock time          131ms       0     6ms     1us     1us    30us     1us
# Rows sent          1.64M       0   4.83k   23.78   92.72  228.95    0.99
# Rows examine      28.33M       0   3.08M  409.84   1.46k  12.06k    0.99
# Query size         5.21M      27     158   75.34  143.84   43.12   51.63

# Profile
# Rank Query ID                            Response time  Calls R/Call V/M
# ==== =================================== ============== ===== ====== ===
#    1 0x676347F321DB8BC7FCB05D4948FC2248  139.1914 90.1% 11177 0.0125  0.28 SELECT visit_history
#    2 0x57AC6CF9E75AF6673635BEFFE5F2117E    6.1862  4.0% 35900 0.0002  0.00 SELECT tenant
#    3 0x2E69352DE16B15042A1217500A0400FE    4.8956  3.2% 10384 0.0005  0.00 INSERT visit_history
# MISC 0xMISC                                4.1417  2.7% 15028 0.0003   0.0 <9 ITEMS>

# Query 1: 174.64 QPS, 2.17x concurrency, ID 0x676347F321DB8BC7FCB05D4948FC2248 at byte 3410119
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.28
# Time range: 2023-11-09T17:13:40 to 2023-11-09T17:14:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         15   11177
# Exec time     90    139s   143us   807ms    12ms    22ms    59ms     2ms
# Lock time     18    24ms       0     4ms     2us     1us    39us     1us
# Rows sent     96   1.59M       0   4.83k  149.26  166.51  567.61   56.92
# Rows examine  88  25.20M       0  77.75k   2.31k   2.62k   8.91k  874.75
# Query size    29   1.52M     136     144  142.28  136.99    0.64  136.99
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################
#   1ms  ################################################################
#  10ms  ###################
# 100ms  ##
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'visit_history'\G
#    SHOW CREATE TABLE `isuports`.`visit_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT player_id, MIN(created_at) AS min_created_at FROM visit_history WHERE tenant_id = 1 AND competition_id = '530909c23' GROUP BY player_id\G

# Query 2: 560.94 QPS, 0.10x concurrency, ID 0x57AC6CF9E75AF6673635BEFFE5F2117E at byte 6279981
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-09T17:13:40 to 2023-11-09T17:14:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         49   35900
# Exec time      4      6s    45us    14ms   172us   348us   390us   108us
# Lock time     53    70ms       0     6ms     1us     1us    35us     1us
# Rows sent      2  35.06k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  35.06k       0       1    1.00    0.99    0.01    0.99
# Query size    34   1.79M      42      58   52.23   56.92    5.03   51.63
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################
# 100us  ################################################################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'tenant'\G
#    SHOW CREATE TABLE `isuports`.`tenant`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM tenant WHERE name = 'sr-rpoky-1699550046'\G

# Query 3: 164.83 QPS, 0.08x concurrency, ID 0x2E69352DE16B15042A1217500A0400FE at byte 1463121
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-09T17:13:41 to 2023-11-09T17:14:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         14   10384
# Exec time      3      5s    82us    28ms   471us     2ms   992us   167us
# Lock time     14    19ms       0     2ms     1us     1us    23us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    27   1.42M     138     150  143.11  143.84    3.40  136.99
# String:
# Databases    isuports
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isuports` LIKE 'visit_history'\G
#    SHOW CREATE TABLE `isuports`.`visit_history`\G
INSERT INTO visit_history (player_id, tenant_id, competition_id, created_at, updated_at) VALUES ('6269df5e8', 71, '6703', 1699550031, 1699550031)\G
